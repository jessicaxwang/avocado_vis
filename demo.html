<!DOCTYPE html>
<meta charset="utf-8">

<script src="js/d3.v4.min.js"></script>
<script src="js/topojson.v1.min.js"></script>

<div id='svg'></div>

<script>

    var chartDiv = document.getElementById('svg')
    var width = chartDiv.clientWidth;
    var height = chartDiv.clientHeight;

    var svg = d3.select('#svg').append('svg')
        .attr('width', width)
        .attr('height', height)


    d3.csv('./fast-food-restaurants/Datafiniti_Fast_Food_Restaurants_May19.csv', function(d){
        return {
            id: d.id,
            state: d.province,
            city: d.city,
            name: d.name,
            lat: +d.latitude,
            long: +d.longitude
        };
    }, function(error, rows) {
        process(rows)
    });
    
    var projection = d3.geoAlbersUsa();

    var restaurants = d3.map()
    function process(data){
        data.forEach(function(d) {
            svg.append("circle").attr("r",5).attr("transform", function() {return "translate(" + projection([d.long,d.lat]) + ")";});

            if (restaurants.has(d.name)) {
                restaurants.get(d.name).push(d.lat)
            } else {
                restaurants.set(d.name, [d.lat])
            }
        })

        console.log(restaurants)
    }

</script>
